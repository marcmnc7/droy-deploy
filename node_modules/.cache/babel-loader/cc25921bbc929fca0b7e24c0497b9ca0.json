{"ast":null,"code":"import _regeneratorRuntime from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import api from'../../services/apiClient';import firebase from'../../services/firebase';var ModalDelete=/*#__PURE__*/function(_Component){_inherits(ModalDelete,_Component);var _super=_createSuper(ModalDelete);function ModalDelete(props){var _this;_classCallCheck(this,ModalDelete);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$props,project,onClose,name,listRef,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$props=_this.props,project=_this$props.project,onClose=_this$props.onClose;name=_this.state.name;_context.prev=3;if(!(name===project.name)){_context.next=13;break;}_context.next=7;return api.delete(\"/projects/\".concat(project._id));case 7:listRef=firebase.storage().ref(firebase.auth().currentUser.uid);res=listRef.child(project._id);res.listAll().then(function(res){res.items.forEach(function(itemRef){itemRef.delete();});});onClose();_context.next=14;break;case 13:_this.setState({error:'The fiels do not match'});case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](3);_this.setState({error:_context.t0.toString('')});case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,16]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={name:'',error:''};return _this;}_createClass(ModalDelete,[{key:\"render\",value:function render(){var _this$props2=this.props,onClose=_this$props2.onClose,project=_this$props2.project;var error=this.state.error;return/*#__PURE__*/React.createElement(\"div\",{className:\"modal-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-style\"},/*#__PURE__*/React.createElement(\"button\",{className:\"close-modal\",onClick:onClose},/*#__PURE__*/React.createElement(\"img\",{className:\"close-modal-image\",src:\"../../img/close-icon.png\",alt:\"delete-project\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"text-modal-close\"},\" Type \",/*#__PURE__*/React.createElement(\"span\",{className:\"name-text-delete\"},project.name),\" to delete your project permanently.\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-create-project\",onSubmit:this.handleDelete},/*#__PURE__*/React.createElement(\"input\",{required:\"required\",className:\"input-modal\",type:\"text\",name:\"name\",placeholder:\"\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"button-modal\",type:\"submit\"},\"Delete\")),/*#__PURE__*/React.createElement(\"p\",{className:\"error-text\"},error)));}}]);return ModalDelete;}(Component);export{ModalDelete as default};","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/components/droy/ModalDelete.js"],"names":["React","Component","api","firebase","ModalDelete","props","handleChange","e","setState","target","name","value","handleDelete","preventDefault","project","onClose","state","delete","_id","listRef","storage","ref","auth","currentUser","uid","res","child","listAll","then","items","forEach","itemRef","error","toString"],"mappings":"8hCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,GAAP,KAAgB,0BAAhB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,C,GAEqBC,CAAAA,W,0GACnB,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EADiB,MAQnBC,YARmB,CAQJ,SAACC,CAAD,CAAO,CACpB,MAAKC,QAAL,oBACGD,CAAC,CAACE,MAAF,CAASC,IADZ,CACmBH,CAAC,CAACE,MAAF,CAASE,KAD5B,GAGD,CAZkB,OAcnBC,YAdmB,0FAcJ,iBAAOL,CAAP,mKACbA,CAAC,CAACM,cAAF,GADa,YAEgB,MAAKR,KAFrB,CAELS,OAFK,aAELA,OAFK,CAEIC,OAFJ,aAEIA,OAFJ,CAGLL,IAHK,CAGI,MAAKM,KAHT,CAGLN,IAHK,sBAKPA,IAAI,GAAKI,OAAO,CAACJ,IALV,iDAMHR,CAAAA,GAAG,CAACe,MAAJ,qBAAwBH,OAAO,CAACI,GAAhC,EANG,QAOHC,OAPG,CAOOhB,QAAQ,CAACiB,OAAT,GAAmBC,GAAnB,CAAuBlB,QAAQ,CAACmB,IAAT,GAAgBC,WAAhB,CAA4BC,GAAnD,CAPP,CAQHC,GARG,CAQGN,OAAO,CAACO,KAAR,CAAcZ,OAAO,CAACI,GAAtB,CARH,CASTO,GAAG,CAACE,OAAJ,GAAcC,IAAd,CAAmB,SAASH,GAAT,CAAc,CAC/BA,GAAG,CAACI,KAAJ,CAAUC,OAAV,CAAkB,SAASC,OAAT,CAAkB,CAClCA,OAAO,CAACd,MAAR,GACD,CAFD,EAGD,CAJD,EAKAF,OAAO,GAdE,+BAgBT,MAAKP,QAAL,CAAc,CACZwB,KAAK,CAAE,wBADK,CAAd,EAhBS,yFAqBX,MAAKxB,QAAL,CAAc,CACZwB,KAAK,CAAE,YAAMC,QAAN,CAAe,EAAf,CADK,CAAd,EArBW,qEAdI,+DAEjB,MAAKjB,KAAL,CAAa,CACXN,IAAI,CAAE,EADK,CAEXsB,KAAK,CAAE,EAFI,CAAb,CAFiB,aAMlB,C,+DAoCQ,kBACsB,KAAK3B,KAD3B,CACCU,OADD,cACCA,OADD,CACUD,OADV,cACUA,OADV,IAECkB,CAAAA,KAFD,CAEW,KAAKhB,KAFhB,CAECgB,KAFD,CAGP,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,8BAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAEjB,OAAzC,eACE,2BAAK,SAAS,CAAC,mBAAf,CAAmC,GAAG,CAAC,0BAAvC,CAAkE,GAAG,CAAC,gBAAtE,EADF,CADF,cAIE,yBAAG,SAAS,CAAC,kBAAb,wBAAsC,4BAAM,SAAS,CAAC,kBAAhB,EAAoCD,OAAO,CAACJ,IAA5C,CAAtC,wCAJF,cAKE,4BAAM,SAAS,CAAC,qBAAhB,CAAsC,QAAQ,CAAE,KAAKE,YAArD,eACE,6BAAO,QAAQ,CAAC,UAAhB,CAA2B,SAAS,CAAC,aAArC,CAAmD,IAAI,CAAC,MAAxD,CACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,EAFd,CAGE,QAAQ,CAAE,KAAKN,YAHjB,EADF,cAKE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,IAAI,CAAC,QAAtC,WALF,CALF,cAYE,yBAAG,SAAS,CAAC,YAAb,EAA2B0B,KAA3B,CAZF,CADF,CADF,CAkBD,C,yBAhEsC/B,S,SAApBG,W","sourcesContent":["import React, { Component } from 'react'\nimport api from '../../services/apiClient'\nimport firebase from '../../services/firebase'\n\nexport default class ModalDelete extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      name: '',\n      error: ''\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleDelete = async (e) => {\n    e.preventDefault()\n    const { project, onClose } = this.props\n    const { name } = this.state\n    try {\n      if( name === project.name) {\n        await api.delete(`/projects/${project._id}`)\n        const listRef = firebase.storage().ref(firebase.auth().currentUser.uid)\n        const res = listRef.child(project._id)\n        res.listAll().then(function(res) {\n          res.items.forEach(function(itemRef) {\n            itemRef.delete()\n          });\n        })  \n        onClose()\n      } else {\n        this.setState({\n          error: 'The fiels do not match'\n        })\n      }\n    } catch (error) {\n      this.setState({\n        error: error.toString('')\n      })\n    }\n  }\n\n\n  render() {\n    const { onClose, project } = this.props\n    const { error } = this.state\n    return (\n      <div className='modal-container'>\n        <div className='modal-style'>\n          <button className='close-modal' onClick={onClose}>\n            <img className='close-modal-image' src=\"../../img/close-icon.png\" alt='delete-project'></img>\n          </button>\n          <p className='text-modal-close'> Type <span className='name-text-delete'>{project.name}</span> to delete your project permanently.</p>\n          <form className='form-create-project' onSubmit={this.handleDelete}>\n            <input required=\"required\" className='input-modal' type=\"text\"\n              name=\"name\"\n              placeholder=\"\"\n              onChange={this.handleChange} />\n            <button className='button-modal' type='submit'>Delete</button>\n          </form>\n          <p className='error-text'>{error}</p>\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}