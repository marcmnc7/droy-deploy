{"ast":null,"code":"import _regeneratorRuntime from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withData}from'../../contexts/dataContext';import'../../styles/components-selectorBar.css';import api from'../../services/apiClient';import alias from'../../utils/alias';import Loading from'../droy/Loading';var STATUS={LOADING:'LOADING',LOADED:'LOADED',ERROR:'ERROR'};var ComponentsSelectorBar=/*#__PURE__*/function(_Component){_inherits(ComponentsSelectorBar,_Component);var _super=_createSuper(ComponentsSelectorBar);function ComponentsSelectorBar(props){var _this;_classCallCheck(this,ComponentsSelectorBar);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var projectStyle,_yield$api$get,styleComponents;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;projectStyle=_this.props.projectStyle;_context.next=4;return api.get(\"/components?style=\".concat(projectStyle));case 4:_yield$api$get=_context.sent;styleComponents=_yield$api$get.data;_this.setState({styleComponents:styleComponents,status:STATUS.LOADED});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);_this.setState({status:STATUS.ERROR});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));_this.showComponents=function(){var usedCompIds=_this.props.userLayoutObj.map(function(c){return c.code;});var styleComponents=_this.state.styleComponents;return styleComponents.map(function(c){var thumbnail=c.thumbnail;if(!usedCompIds.includes(c.code)){return/*#__PURE__*/React.createElement(\"div\",{key:c.code,style:{margin:'20px',backgroundImage:\"url(\\\"\".concat(thumbnail.name,\"\\\")\"),backgroundRepeat:'no-repeat',backgroundSize:'100%',height:thumbnail.height}},/*#__PURE__*/React.createElement(\"button\",{className:\"buttons-selectorBar\"},/*#__PURE__*/React.createElement(\"img\",{\"data-code\":c.code,onClick:_this.handleAddComponent,className:\"image-selectorBar\",src:\"/img/sum-icon.png\",alt:\"down\"})));}return/*#__PURE__*/React.createElement(\"div\",{key:c.code,style:{margin:'20px',opacity:'0.3',backgroundImage:\"url(\\\"\".concat(thumbnail.name,\"\\\")\"),backgroundRepeat:'no-repeat',backgroundSize:'100%',height:thumbnail.height}});});};_this.handleAddComponent=function(e){var addComponent=_this.props.addComponent;var styleComponents=_this.state.styleComponents;var code=e.target.attributes['data-code'].value;var _alias$findByCode=alias.findByCode(styleComponents,code),defaultConfig=_alias$findByCode.defaultConfig,componentOptions=_alias$findByCode.componentOptions,componentStyle=_alias$findByCode.componentStyle;addComponent(code,defaultConfig,componentOptions,componentStyle);};_this.showContent=function(){var status=_this.state.status;switch(status){case STATUS.LOADING:return/*#__PURE__*/React.createElement(\"div\",{className:\"loading-container\"},/*#__PURE__*/React.createElement(Loading,null));case STATUS.LOADED:return _this.showComponents();case STATUS.ERROR:return/*#__PURE__*/React.createElement(\"div\",{className:\"error-text padding-error\"},\"Error\");default:break;}};_this.state={styleComponents:[],status:STATUS.LOADING};return _this;}_createClass(ComponentsSelectorBar,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"components-bar\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"title-component-bar\"},\"Components:\"),this.showContent());}}]);return ComponentsSelectorBar;}(Component);export default withData(ComponentsSelectorBar);","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/components/droy/ComponentsSelectorBar.js"],"names":["React","Component","withData","api","alias","Loading","STATUS","LOADING","LOADED","ERROR","ComponentsSelectorBar","props","componentDidMount","projectStyle","get","styleComponents","data","setState","status","showComponents","usedCompIds","userLayoutObj","map","c","code","state","thumbnail","includes","margin","backgroundImage","name","backgroundRepeat","backgroundSize","height","handleAddComponent","opacity","e","addComponent","target","attributes","value","findByCode","defaultConfig","componentOptions","componentStyle","showContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withData } from '../../contexts/dataContext'\nimport '../../styles/components-selectorBar.css'\nimport api from '../../services/apiClient'\nimport alias from '../../utils/alias'\nimport Loading from '../droy/Loading'\n\nconst STATUS = {\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  ERROR: 'ERROR',\n}\n\nclass ComponentsSelectorBar extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      styleComponents: [],\n      status: STATUS.LOADING\n    }\n  }\n\n  componentDidMount = async () => {\n    try {\n      const { projectStyle } = this.props\n      const { data: styleComponents } = await api.get(`/components?style=${projectStyle}`)\n      this.setState({ styleComponents, status: STATUS.LOADED })\n    } catch (error) {\n      this.setState({ status: STATUS.ERROR })\n    }\n  }\n\n  showComponents = () => {\n    const usedCompIds = this.props.userLayoutObj.map(c => c.code)\n    const { styleComponents } = this.state\n    return styleComponents.map(c => {\n      const thumbnail = c.thumbnail\n      if (!usedCompIds.includes(c.code)) {\n        return (\n          <div key={c.code} style={{ margin: '20px', backgroundImage: `url(\"${thumbnail.name}\")`, backgroundRepeat: 'no-repeat', backgroundSize: '100%', height: thumbnail.height }}>\n            <button className='buttons-selectorBar'>\n              <img data-code={c.code} onClick={this.handleAddComponent} className='image-selectorBar' src=\"/img/sum-icon.png\" alt='down'/>\n            </button>\n          </div>)\n      }\n      return (<div key={c.code} style={{ margin: '20px', opacity: '0.3', backgroundImage: `url(\"${thumbnail.name}\")`, backgroundRepeat: 'no-repeat', backgroundSize: '100%', height: thumbnail.height }}>\n      </div>)\n    })\n  }\n\n  handleAddComponent = (e) => {\n    const { addComponent } = this.props\n    const { styleComponents } = this.state\n    const code = e.target.attributes['data-code'].value  \n    const { defaultConfig, componentOptions, componentStyle } = alias.findByCode(styleComponents, code)\n    addComponent(code, defaultConfig, componentOptions, componentStyle)\n  }\n\n  showContent = () => {\n    const { status } = this.state\n    switch (status) {\n      case STATUS.LOADING:\n        return <div className='loading-container'><Loading /></div>\n      case STATUS.LOADED:\n        return this.showComponents()\n      case STATUS.ERROR:\n        return <div className='error-text padding-error'>Error</div>\n      default:\n        break;\n    }\n  }\n\n  render() {\n    return (\n      <div className='components-bar'>\n        <h2 className='title-component-bar'>Components:</h2>\n        {this.showContent()}\n      </div>\n    )\n  }\n}\n\nexport default withData(ComponentsSelectorBar)"]},"metadata":{},"sourceType":"module"}