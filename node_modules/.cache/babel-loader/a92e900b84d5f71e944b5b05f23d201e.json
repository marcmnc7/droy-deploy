{"ast":null,"code":"var _jsxFileName = \"/home/ironhacker/Documents/M3/droy/src/contexts/dataContext.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nconst DataContext = React.createContext(); // Consumer Wrapper\n\nexport const withData = Comp => {\n  return class WithData extends Component {\n    render() {\n      return /*#__PURE__*/React.createElement(DataContext.Consumer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 11,\n          columnNumber: 9\n        }\n      }, props => /*#__PURE__*/React.createElement(Comp, Object.assign({}, this.props, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 12,\n          columnNumber: 24\n        }\n      })));\n    }\n\n  };\n}; // Provider def\n\nclass DataProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.switchMode = () => {\n      const {\n        mode\n      } = this.state;\n      this.setState({\n        mode: mode === 'edit' ? 'view' : 'edit'\n      });\n    };\n\n    this.copyUserLayoutObjToContext = u => {\n      this.setState({\n        userLayoutObj: u\n      });\n    };\n\n    this.moveDownComponent = elementCode => {\n      const {\n        stateCopy\n      } = { ...this.state\n      };\n      const {\n        userLayoutObj: copyUserLayoutObjToContext\n      } = stateCopy;\n      let fromIndex = 0;\n      let element;\n\n      for (let i = 0; i < copyUserLayoutObjToContext.length; i++) {\n        const c = copyUserLayoutObjToContext[i];\n\n        if (c.code === elementCode) {\n          element = c;\n          fromIndex = i;\n          break;\n        }\n      }\n\n      if (!element) return;\n      copyUserLayoutObjToContext.splice(fromIndex, 1);\n      copyUserLayoutObjToContext.splice(fromIndex + 1, 0, element); // update context too\n\n      this.setState({\n        userLayoutObj: copyUserLayoutObjToContext\n      });\n    };\n\n    this.saveComponentInfoToContext = (componentCode, componentAttr, attrContent) => {\n      const stateCopy = { ...this.state\n      };\n      const {\n        userLayoutObj: newUserLayoutObj\n      } = stateCopy;\n\n      for (const userObject of newUserLayoutObj) {\n        if (userObject.code === componentCode) {\n          userObject.info[componentAttr] = attrContent;\n        }\n      }\n\n      console.log(44, newUserLayoutObj);\n      this.setState({\n        userLayoutObj: newUserLayoutObj\n      });\n    };\n\n    this.save = () => {\n      console.log(\"Saving info:\", this.userLayoutObj);\n    };\n\n    this.state = {\n      mode: 'edit',\n      userLayoutObj: []\n    };\n  }\n  /* SWITCH MODES */\n\n\n  render() {\n    const {\n      children\n    } = this.props;\n    const {\n      userLayoutObj\n    } = this;\n    return /*#__PURE__*/React.createElement(DataContext.Provider, {\n      value: {\n        saveComponentInfoToContext: this.saveComponentInfoToContext,\n        getUserLayoutObj: this.getUserLayoutObj,\n        copyUserLayoutObjToContext: this.copyUserLayoutObjToContext,\n        switchMode: this.switchMode,\n        moveDownComponent: this.moveDownComponent,\n        save: this.save,\n        ...this.state\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, children);\n  }\n\n}\n\nDataProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default DataProvider;","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/contexts/dataContext.js"],"names":["React","Component","PropTypes","DataContext","createContext","withData","Comp","WithData","render","props","DataProvider","constructor","switchMode","mode","state","setState","copyUserLayoutObjToContext","u","userLayoutObj","moveDownComponent","elementCode","stateCopy","fromIndex","element","i","length","c","code","splice","saveComponentInfoToContext","componentCode","componentAttr","attrContent","newUserLayoutObj","userObject","info","console","log","save","children","getUserLayoutObj","propTypes","node"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nconst DataContext = React.createContext()\n\n// Consumer Wrapper\nexport const withData = (Comp) => {\n  return class WithData extends Component {\n    render () {\n      return (\n        <DataContext.Consumer>\n          { (props) => <Comp {...this.props} {...props} /> }\n        </DataContext.Consumer>\n      )\n    }\n  }\n}\n\n// Provider def\nclass DataProvider extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      mode: 'edit',\n      userLayoutObj: []\n    }\n  }\n\n  /* SWITCH MODES */\n  switchMode = () => {\n    const { mode } = this.state\n    this.setState({ mode: mode === 'edit' ? 'view': 'edit' })\n  }\n\n  \n  copyUserLayoutObjToContext = (u) => {\n    this.setState({\n      userLayoutObj: u\n    })\n  }\n  \n\n  /* COMPONENTS POSITION */\n  moveDownComponent = (elementCode) => {\n    const { stateCopy } = {...this.state}\n    const { userLayoutObj: copyUserLayoutObjToContext } = stateCopy\n    let fromIndex = 0; let element\n    for (let i = 0; i < copyUserLayoutObjToContext.length; i++) {\n      const c = copyUserLayoutObjToContext[i];\n      if(c.code === elementCode){\n        element = c; fromIndex = i\n        break\n      }\n    }\n    if(!element) return\n    copyUserLayoutObjToContext.splice(fromIndex, 1)\n    copyUserLayoutObjToContext.splice(fromIndex + 1, 0, element)\n    // update context too\n    this.setState({ userLayoutObj: copyUserLayoutObjToContext })\n  }\n\n  saveComponentInfoToContext = (componentCode, componentAttr, attrContent) => {\n    const stateCopy = {...this.state}\n    const { userLayoutObj: newUserLayoutObj } = stateCopy\n    for (const userObject of newUserLayoutObj) {\n      if(userObject.code === componentCode) {\n        userObject.info[componentAttr] = attrContent\n      }\n    }\n    console.log(44, newUserLayoutObj)\n    this.setState({\n      userLayoutObj: newUserLayoutObj\n    })\n  };\n\n  save = () => {\n    console.log(\"Saving info:\", this.userLayoutObj)\n  }\n\n  render () {\n    const { children } = this.props\n    const { userLayoutObj } = this\n    \n    return (\n      <DataContext.Provider value={{\n        saveComponentInfoToContext: this.saveComponentInfoToContext,\n        getUserLayoutObj: this.getUserLayoutObj,\n        copyUserLayoutObjToContext: this.copyUserLayoutObjToContext,\n        switchMode: this.switchMode,\n        moveDownComponent: this.moveDownComponent,\n        save: this.save,\n        ...this.state\n        \n      }}>\n        {children}\n      </DataContext.Provider>\n    )\n  }\n}\n\nDataProvider.propTypes = {\n  children: PropTypes.node\n}\n\nexport default DataProvider\n"]},"metadata":{},"sourceType":"module"}