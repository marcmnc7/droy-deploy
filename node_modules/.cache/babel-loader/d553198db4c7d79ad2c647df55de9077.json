{"ast":null,"code":"var _jsxFileName = \"/home/ironhacker/Documents/M3/droy/src/components/droy/ModalStartProject.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport '../../styles/modal-start-project.css';\nimport api from '../../services/apiClient';\nimport { withRouter } from \"react-router\";\n\nclass ModalStartProject extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      const {\n        name,\n        theme,\n        errors\n      } = this.state;\n      const {\n        history\n      } = this.props;\n\n      try {\n        // const createdProject = await api.post('/projects', { name, style: theme, currentUser: {_id: '5eb7036bfe6fa91fcbafb898'} })\n        const createdProject = await api.post('/projects', {\n          name,\n          theme,\n          currentUser: {\n            _id: '5eb7036bfe6fa91fcbafb898'\n          }\n        });\n        history.push(`/builder/${createdProject.data._id}`);\n      } catch (error) {\n        const newErrors = [...errors];\n        newErrors.push(error);\n        this.setState({\n          errors: newErrors\n        });\n      }\n      /*\n      axios\n        .post(\" \", this.state)\n        .then(response => {\n        })\n        .catch((error) => {\n          this.setState({\n            error: error,\n          })\n        })\n       */\n\n\n      this.setState({\n        name: '',\n        theme: 'classic'\n      });\n    };\n\n    this.showErrors = () => {\n      const {\n        errors\n      } = this.state;\n      const toShow = [...errors];\n      return toShow.map((e, k) => /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 31\n        }\n      }, e));\n    };\n\n    this.state = {\n      name: '',\n      theme: 'classic',\n      errors: []\n    };\n  }\n\n  render() {\n    const {\n      onClose,\n      styles\n    } = this.props;\n    const {\n      name,\n      theme,\n      errors\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-style\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"close-modal\",\n      onClick: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, \"X\"), this.showErrors(), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-create-project\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label-modal\",\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Name of the project\"), /*#__PURE__*/React.createElement(\"input\", {\n      required: \"required\",\n      className: \"input-modal\",\n      type: \"text\",\n      id: \"name\",\n      value: name,\n      name: \"name\",\n      placeholder: \"name\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label-modal\",\n      htmlFor: \"theme\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"Theme of the project\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"option-modal\",\n      id: \"theme\",\n      value: theme,\n      name: \"theme\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, styles.map((s, k) => /*#__PURE__*/React.createElement(\"option\", {\n      value: s.code,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 37\n      }\n    }, s.name))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-modal\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"Create project\"))));\n  }\n\n}\n\nModalStartProject.propTypes = {\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func\n};\nexport default withRouter(ModalStartProject);","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/components/droy/ModalStartProject.js"],"names":["React","Component","Redirect","PropTypes","api","withRouter","ModalStartProject","constructor","props","handleChange","e","setState","target","name","value","handleSubmit","event","preventDefault","theme","errors","state","history","createdProject","post","currentUser","_id","push","data","error","newErrors","showErrors","toShow","map","k","render","onClose","styles","s","code","propTypes","isOpen","bool","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport '../../styles/modal-start-project.css'\nimport api from '../../services/apiClient'\nimport { withRouter } from \"react-router\";\n\nclass ModalStartProject extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      name: '',\n      theme: 'classic',\n      errors: []\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    const { name, theme, errors } = this.state\n    const { history } = this.props\n    try {\n      // const createdProject = await api.post('/projects', { name, style: theme, currentUser: {_id: '5eb7036bfe6fa91fcbafb898'} })\n      const createdProject = await api.post('/projects', { name, theme, currentUser: {_id: '5eb7036bfe6fa91fcbafb898'} })\n      history.push(`/builder/${createdProject.data._id}`)      \n    } catch (error) {\n      const newErrors = [...errors]\n      newErrors.push(error)\n      this.setState({\n        errors: newErrors\n      })\n    }\n\n    /*\n    axios\n      .post(\" \", this.state)\n      .then(response => {\n      })\n      .catch((error) => {\n        this.setState({\n          error: error,\n        })\n      })\n     */\n\n    this.setState({\n      name: '',\n      theme: 'classic'\n    });\n  }\n\n  showErrors = () => {\n    const { errors } = this.state\n    const toShow = [...errors]\n    \n    return toShow.map((e, k)=><p>{e}</p>)\n  }\n\n  render() {\n    const { onClose, styles } = this.props\n    const { name, theme, errors } = this.state;\n    return (\n      <div className='modal-container'>\n        <div className='modal-style'>\n          <button className='close-modal' onClick={onClose}>X</button>\n          {this.showErrors()}\n          <form className='form-create-project' onSubmit={this.handleSubmit}>\n            <label className='label-modal' htmlFor=\"name\">Name of the project</label>\n            <input required=\"required\" className='input-modal' type=\"text\"\n              id='name'\n              value={name}\n              name=\"name\"\n              placeholder=\"name\"\n              onChange={this.handleChange} />\n            <label className='label-modal' htmlFor=\"theme\">Theme of the project</label>\n            <select className='option-modal' id='theme' value={theme} name='theme' onChange={this.handleChange}>\n              {styles.map((s, k) => <option value={s.code}>{s.name}</option> )}\n            </select>\n            <button className='button-modal' type='submit'>Create project</button>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nModalStartProject.propTypes = {\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func\n}\n\nexport default withRouter(ModalStartProject)"]},"metadata":{},"sourceType":"module"}