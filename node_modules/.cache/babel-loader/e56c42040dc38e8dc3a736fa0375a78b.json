{"ast":null,"code":"import _defineProperty from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import NavBar from'../components/droy/NavBar';import Loading from'../components/droy/Loading';import ModalResetPassword from'../components/droy/ModalResetPassword';import{Link}from'react-router-dom';import firebase from'../services/firebase';import'../styles/login-signup.css';var STATUS={LOADING:'LOADING',ERROR:'ERROR',LOADED:'LOADED'};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var history,_this$state,email,hashedPassword;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();history=_this.props.history;_this$state=_this.state,email=_this$state.email,hashedPassword=_this$state.hashedPassword;_this.setState({status:STATUS.LOADING});_context.next=7;return firebase.auth().signInWithEmailAndPassword(email,hashedPassword);case 7:history.push(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);_this.setState({status:STATUS.LOADED,errorMessage:'Error on login'});case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.showModalReset=function(){_this.setState({resetPasswordModal:true});};_this.closeModalReset=function(){_this.setState({resetPasswordModal:false});};_this.handleSubmitGoogle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var history,provider;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;history=_this.props.history;provider=new firebase.auth.GoogleAuthProvider();_context2.next=5;return firebase.auth().signInWithPopup(provider);case 5:history.push(\"/\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);_this.setState({status:STATUS.ERROR,errorMessage:'Error on login google'});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.showContent=function(){var _this$state2=_this.state,status=_this$state2.status,errorMessage=_this$state2.errorMessage,email=_this$state2.email,hashedPassword=_this$state2.hashedPassword,resetPasswordModal=_this$state2.resetPasswordModal;switch(status){case STATUS.LOADING:return/*#__PURE__*/React.createElement(\"div\",{className:\"loading-container\"},/*#__PURE__*/React.createElement(Loading,null));case STATUS.LOADED:return/*#__PURE__*/React.createElement(\"div\",{className:\"login-signup-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"logo-container\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-title-container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"title-login-signup\"},\"Login:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"error-text padding-error\"},errorMessage),resetPasswordModal&&/*#__PURE__*/React.createElement(ModalResetPassword,{onClose:_this.closeModalReset}),/*#__PURE__*/React.createElement(\"form\",{className:\"login-form\",onSubmit:_this.handleSubmit},/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",placeholder:\"email\",type:\"text\",required:\"required\",name:\"email\",value:email,id:\"email\",onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",type:\"password\",required:\"required\",placeholder:\"\\xB7\\xB7\\xB7\\xB7\\xB7\\xB7\",name:\"hashedPassword\",id:\"hashedPassword\",value:hashedPassword,onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"button-link-login-signup\"},/*#__PURE__*/React.createElement(\"div\",{className:\"link-login-container\"},/*#__PURE__*/React.createElement(Link,{className:\"text-form\",to:\"/signup\"},\"You don't have an account? Register here!\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-form\",onClick:_this.showModalReset},\"Reset password\")),/*#__PURE__*/React.createElement(\"input\",{className:\"button-form\",type:\"submit\",value:\"Log in\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"google-container\",onClick:_this.handleSubmitGoogle},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"google-image\",src:\"/img/google.png\",alt:\"google\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"google-text\"},\"Login with google\"))));case STATUS.ERROR:return/*#__PURE__*/React.createElement(\"div\",{className:\"error-text\"},errorMessage);default:return/*#__PURE__*/React.createElement(\"div\",{className:\"error-text\"},\"Strange error...\");}};_this.state={email:\"\",hashedPassword:\"\",status:STATUS.LOADED,errorMessage:\"\",resetPasswordModal:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,null),this.showContent());}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/pages/Login.js"],"names":["React","Component","NavBar","Loading","ModalResetPassword","Link","firebase","STATUS","LOADING","ERROR","LOADED","Login","props","handleSubmit","e","preventDefault","history","state","email","hashedPassword","setState","status","auth","signInWithEmailAndPassword","push","errorMessage","showModalReset","resetPasswordModal","closeModalReset","handleSubmitGoogle","provider","GoogleAuthProvider","signInWithPopup","handleChange","target","name","value","showContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport NavBar from '../components/droy/NavBar'\nimport Loading from '../components/droy/Loading'\nimport ModalResetPassword from '../components/droy/ModalResetPassword'\nimport { Link } from 'react-router-dom'\nimport firebase from '../services/firebase'\nimport '../styles/login-signup.css'\n\n\nconst STATUS = {\n  LOADING: 'LOADING',\n  ERROR: 'ERROR',\n  LOADED: 'LOADED',\n}\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: \"\",\n      hashedPassword: \"\",\n      status: STATUS.LOADED,\n      errorMessage: \"\",\n      resetPasswordModal: false\n    }\n  }\n\n  handleSubmit = async (e) => {\n    try {\n      e.preventDefault();\n      const { history } = this.props\n      const { email, hashedPassword } = this.state;\n      this.setState({ status: STATUS.LOADING })\n      await firebase.auth().signInWithEmailAndPassword(email, hashedPassword)\n      history.push(\"/\")\n    } catch (error) {\n      this.setState({\n        status: STATUS.LOADED,\n        errorMessage: 'Error on login'\n      })\n    }\n  };\n\n  showModalReset = () => {\n    this.setState({\n      resetPasswordModal: true\n    })\n  }\n\n  closeModalReset = () => {\n    this.setState({\n      resetPasswordModal: false\n    })\n  }\n\n  handleSubmitGoogle = async (e) => {\n    try {\n      const { history } = this.props\n      const provider = new firebase.auth.GoogleAuthProvider()\n      await firebase.auth().signInWithPopup(provider)\n      history.push(\"/\")\n    } catch (error) {\n      this.setState({\n        status: STATUS.ERROR,\n        errorMessage: 'Error on login google',\n      });\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  showContent = () => {\n    const { status, errorMessage, email, hashedPassword, resetPasswordModal } = this.state\n    switch (status) {\n      case STATUS.LOADING:\n        return <div className='loading-container'><Loading /></div>\n      case STATUS.LOADED:\n        return (\n          <div className='login-signup-container'>\n            <div className='logo-container'>\n            </div>\n            <div className='form-title-container'>\n              <h1 className='title-login-signup'>Login:</h1>\n              <p className='error-text padding-error'>{errorMessage}</p>\n              {resetPasswordModal && <ModalResetPassword onClose={this.closeModalReset} />}\n              <form className='login-form' onSubmit={this.handleSubmit}>\n                <input className='input-form'\n                  placeholder=\"email\"\n                  type=\"text\"\n                  required=\"required\"\n                  name=\"email\"\n                  value={email}\n                  id=\"email\"\n                  onChange={this.handleChange}\n                />\n                <input className='input-form'\n                  type=\"password\"\n                  required=\"required\"\n                  placeholder=\"······\"\n                  name=\"hashedPassword\"\n                  id=\"hashedPassword\"\n                  value={hashedPassword}\n                  onChange={this.handleChange}\n                />\n                <div className='button-link-login-signup'>\n                  <div className='link-login-container'>\n                    <Link className='text-form' to=\"/signup\">You don't have an account? Register here!</Link>\n                    <p className='text-form'  onClick={this.showModalReset}>Reset password</p>\n                  </div>\n                  <input className='button-form' type=\"submit\" value=\"Log in\" />\n                </div>\n              </form>\n              <div className='google-container' onClick={this.handleSubmitGoogle} >\n                <div>\n                  <img className='google-image' src=\"/img/google.png\" alt=\"google\" />\n                </div>\n                <p className='google-text'>Login with google</p>\n              </div>\n            </div>\n          </div>)\n      case STATUS.ERROR:\n        return <div className='error-text'>{errorMessage}</div>\n      default:\n        return <div className='error-text'>Strange error...</div>\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar />\n        {this.showContent()}\n      </div>\n    );\n  }\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}