{"ast":null,"code":"import _defineProperty from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ironhacker/Documents/M3/droy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import firebase from'../services/firebase';import NavBar from'../components/droy/NavBar';import{Link}from'react-router-dom';import'../styles/login-signup.css';import Loading from'../components/droy/Loading';var STATUS={LOADING:'LOADING',ERROR:'ERROR',LOADED:'LOADED'};var SignUp=/*#__PURE__*/function(_Component){_inherits(SignUp,_Component);var _super=_createSuper(SignUp);function SignUp(props){var _this;_classCallCheck(this,SignUp);_this=_super.call(this,props);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,email,hashedPassword,confirmationPassword,history;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();_this$state=_this.state,email=_this$state.email,hashedPassword=_this$state.hashedPassword,confirmationPassword=_this$state.confirmationPassword;history=_this.props.history;if(!(hashedPassword!==confirmationPassword||hashedPassword.length<6)){_context.next=8;break;}_this.setState({errorMessage:'Weak password or mismatch',status:STATUS.LOADED});_context.next=12;break;case 8:_this.setState({status:STATUS.LOADING});_context.next=11;return firebase.auth().createUserWithEmailAndPassword(email,hashedPassword);case 11:history.push('/');case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);_this.setState({status:STATUS.ERROR,errorMessage:'Error on signup'});case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmitGoogle=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var history,provider;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;history=_this.props.history;provider=new firebase.auth.GoogleAuthProvider();_context2.next=5;return firebase.auth().signInWithPopup(provider);case 5:history.push(\"/\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);_this.setState({status:STATUS.ERROR,errorMessage:'Error on signup google'});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.showContent=function(){var _this$state2=_this.state,status=_this$state2.status,errorMessage=_this$state2.errorMessage,email=_this$state2.email,hashedPassword=_this$state2.hashedPassword,name=_this$state2.name,confirmationPassword=_this$state2.confirmationPassword;switch(status){case STATUS.LOADING:return/*#__PURE__*/React.createElement(\"div\",{className:\"loading-container\"},/*#__PURE__*/React.createElement(Loading,null));case STATUS.LOADED:return/*#__PURE__*/React.createElement(\"div\",{className:\"login-signup-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"logo-container\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-title-container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"title-login-signup\"},\"Sign Up\"),/*#__PURE__*/React.createElement(\"p\",{className:\"error-text padding-error\"},errorMessage),/*#__PURE__*/React.createElement(\"form\",{className:\"login-form\",onSubmit:_this.handleSubmit},/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",placeholder:\"email\",type:\"text\",required:\"required\",name:\"email\",value:email,id:\"email\",onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",type:\"password\",required:\"required\",placeholder:\"\\xB7\\xB7\\xB7\\xB7\\xB7\\xB7\",name:\"hashedPassword\",id:\"hashedPassword\",value:hashedPassword,onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",type:\"password\",required:\"required\",placeholder:\"\\xB7\\xB7\\xB7\\xB7\\xB7\\xB7\",name:\"confirmationPassword\",id:\"confirmationPassword\",value:confirmationPassword,onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"input-form\",type:\"text\",required:\"required\",placeholder:\"Bob Marley\",name:\"name\",id:\"name\",value:name,onChange:_this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"button-link-login-signup\"},/*#__PURE__*/React.createElement(Link,{className:\"text-form\",to:\"/login\"},\"Already have an account? Log in here!\"),/*#__PURE__*/React.createElement(\"input\",{className:\"button-form\",type:\"submit\",value:\"create your account\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"google-container\",onClick:_this.handleSubmitGoogle},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"google-image\",src:\"/img/google.png\",alt:\"google\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"google-text\"},\"Sign up with google\"))));case STATUS.ERROR:return/*#__PURE__*/React.createElement(\"div\",{className:\"error-text padding-error\"},errorMessage);default:return/*#__PURE__*/React.createElement(\"div\",{className:\"error-text padding-error\"},\"Strange error...\");}};_this.state={email:\"\",hashedPassword:\"\",name:\"\",confirmationPassword:\"\",status:STATUS.LOADED,errorMessage:\"\"};return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,null),this.showContent());}}]);return SignUp;}(Component);export default SignUp;","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/pages/SignUp.js"],"names":["React","Component","firebase","NavBar","Link","Loading","STATUS","LOADING","ERROR","LOADED","SignUp","props","handleSubmit","e","preventDefault","state","email","hashedPassword","confirmationPassword","history","length","setState","errorMessage","status","auth","createUserWithEmailAndPassword","push","handleSubmitGoogle","provider","GoogleAuthProvider","signInWithPopup","handleChange","target","name","value","showContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport firebase from '../services/firebase'\nimport NavBar from '../components/droy/NavBar'\nimport { Link } from 'react-router-dom'\nimport '../styles/login-signup.css'\nimport Loading from '../components/droy/Loading'\n\nconst STATUS = {\n  LOADING: 'LOADING',\n  ERROR: 'ERROR',\n  LOADED: 'LOADED',\n}\n\nclass SignUp extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: \"\",\n      hashedPassword: \"\",\n      name: \"\",\n      confirmationPassword: \"\",\n      status: STATUS.LOADED,\n      errorMessage: \"\"\n    }\n  }\n\n  handleSubmit = async (e) => {\n    try {\n      e.preventDefault();\n      const { email, hashedPassword, confirmationPassword } = this.state\n      const { history } = this.props\n      if (hashedPassword !== confirmationPassword || hashedPassword.length < 6) {\n        this.setState({\n          errorMessage: 'Weak password or mismatch',\n          status: STATUS.LOADED\n        })\n      } else {\n        this.setState({ status: STATUS.LOADING })\n        await firebase.auth().createUserWithEmailAndPassword(email, hashedPassword)\n        history.push('/')\n      }\n    } catch (error) {\n      this.setState({\n        status: STATUS.ERROR,\n        errorMessage: 'Error on signup'\n      })\n    }\n  };\n\n  handleSubmitGoogle = async () => {\n    try {\n      const { history } = this.props\n      const provider = new firebase.auth.GoogleAuthProvider()\n      await firebase.auth().signInWithPopup(provider)\n      history.push(\"/\")\n    } catch (error) {\n      this.setState({\n        status: STATUS.ERROR,\n        errorMessage: 'Error on signup google',\n      });\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  showContent = () => {\n    const { status, errorMessage, email, hashedPassword, name, confirmationPassword } = this.state\n    switch (status) {\n      case STATUS.LOADING:\n        return <div className='loading-container'><Loading /></div>\n      case STATUS.LOADED:\n        return (<div className='login-signup-container'>\n          <div className='logo-container'>\n          </div>\n          <div className='form-title-container'>\n            <h1 className='title-login-signup'>Sign Up</h1>\n            <p className='error-text padding-error'>{errorMessage}</p>\n            <form className='login-form' onSubmit={this.handleSubmit}>\n              <input className='input-form'\n                placeholder=\"email\"\n                type=\"text\"\n                required=\"required\"\n                name=\"email\"\n                value={email}\n                id=\"email\"\n                onChange={this.handleChange}\n              />\n              <input className='input-form'\n                type=\"password\"\n                required=\"required\"\n                placeholder=\"······\"\n                name=\"hashedPassword\"\n                id=\"hashedPassword\"\n                value={hashedPassword}\n                onChange={this.handleChange}\n              />\n              <input className='input-form'\n                type=\"password\"\n                required=\"required\"\n                placeholder=\"······\"\n                name=\"confirmationPassword\"\n                id=\"confirmationPassword\"\n                value={confirmationPassword}\n                onChange={this.handleChange}\n              />\n              <input className='input-form'\n                type=\"text\"\n                required=\"required\"\n                placeholder=\"Bob Marley\"\n                name=\"name\"\n                id=\"name\"\n                value={name}\n                onChange={this.handleChange}\n              />\n              <div className='button-link-login-signup'>\n                <Link className='text-form' to=\"/login\">Already have an account? Log in here!</Link>\n                <input className='button-form' type=\"submit\" value=\"create your account\" />\n              </div>\n            </form>\n            <div className='google-container' onClick={this.handleSubmitGoogle} >\n              <div>\n                <img className='google-image' src=\"/img/google.png\" alt=\"google\" />\n              </div>\n              <p className='google-text'>Sign up with google</p>\n            </div>\n          </div>\n        </div>)\n      case STATUS.ERROR:\n        return <div className='error-text padding-error'>{errorMessage}</div>\n      default:\n        return <div className='error-text padding-error'>Strange error...</div>\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar />\n        {this.showContent()}\n      </div>\n    );\n  }\n}\n\nexport default SignUp\n"]},"metadata":{},"sourceType":"module"}