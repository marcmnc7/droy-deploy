{"ast":null,"code":"var _jsxFileName = \"/home/ironhacker/Documents/M3/droy/src/pages/Builder.js\";\nimport React, { Component } from 'react';\nimport { withData } from '../contexts/dataContext';\nimport PropTypes from 'prop-types';\nimport UserComponentBase from '../components/droy/UserComponentBase';\nimport ComponentsSelectorBar from '../components/droy/ComponentsSelectorBar';\nimport NavBar from '../components/droy/NavBar';\nimport Loading from '../components/droy/Loading';\nimport '../styles/builder.css';\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\nclass Builder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.reorder = (list, startIndex, endIndex) => {\n      const result = Array.from(list);\n      const [removed] = result.splice(startIndex, 1);\n      result.splice(endIndex, 0, removed);\n      return result;\n    };\n\n    this.componentDidMount = async () => {\n      const {\n        match,\n        getProjectInfo\n      } = this.props;\n      await getProjectInfo(match.params.projectId);\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.showUserComponents = () => {\n      const {\n        userLayoutObj,\n        dataError\n      } = this.props;\n      if (!userLayoutObj.length) return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"empty-component-base\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"image-emptyBuilder\",\n        src: \"/img/empty-icon.png\",\n        alt: \"empty-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-noComponents\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }, \"Start picking one component from the left!\"));\n      if (dataError) return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 27\n        }\n      }, dataError);\n      return userLayoutObj.map(c => {\n        return /*#__PURE__*/React.createElement(UserComponentBase, {\n          componentStyle: c.componentStyle,\n          componentOptions: c.componentOptions,\n          code: c.code,\n          key: c.code,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 14\n          }\n        });\n      });\n    };\n\n    this.state = {\n      isLoading: true\n    };\n  } // a little function to help us with reordering the result\n\n\n  onDragEnd(result) {\n    if (!result.destination) {\n      return;\n    }\n\n    const items = reorder(this.state.items, result.source.index, result.destination.index);\n    /* this.setState({\n      items\n    }) */\n  }\n  /* Updates data context with the actual project information */\n\n\n  render() {\n    const {\n      mode\n    } = this.props;\n    const {\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      withOptions: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-builder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 60\n      }\n    })), /*#__PURE__*/React.createElement(DragDropContext, {\n      onDragEnd: this.onDragEnd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, !isLoading && mode === \"edit\" && /*#__PURE__*/React.createElement(ComponentsSelectorBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 47\n      }\n    }), !isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"components-builder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 28\n      }\n    }, this.showUserComponents())), /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: \"droppable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", Object.assign({}, provided.droppableProps, {\n      ref: provided.innerRef,\n      style: getListStyle(snapshot.isDraggingOver),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }), this.state.items.map((item, index) => /*#__PURE__*/React.createElement(Draggable, {\n      key: item.id,\n      draggableId: item.id,\n      index: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 19\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      ref: provided.innerRef\n    }, provided.draggableProps, provided.dragHandleProps, {\n      style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 23\n      }\n    }), item.content))), provided.placeholder))));\n  }\n\n}\n\nBuilder.propTypes = {\n  userLayoutObj: PropTypes.array,\n  saveInfoToContext: PropTypes.func\n};\nexport default withData(Builder);","map":{"version":3,"sources":["/home/ironhacker/Documents/M3/droy/src/pages/Builder.js"],"names":["React","Component","withData","PropTypes","UserComponentBase","ComponentsSelectorBar","NavBar","Loading","DragDropContext","Droppable","Draggable","Builder","constructor","props","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","componentDidMount","match","getProjectInfo","params","projectId","setState","isLoading","showUserComponents","userLayoutObj","dataError","length","map","c","componentStyle","componentOptions","code","state","onDragEnd","destination","items","source","index","render","mode","provided","snapshot","droppableProps","innerRef","getListStyle","isDraggingOver","item","id","draggableProps","dragHandleProps","getItemStyle","isDragging","style","content","placeholder","propTypes","array","saveInfoToContext","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withData } from '../contexts/dataContext'\nimport PropTypes from 'prop-types'\nimport UserComponentBase from '../components/droy/UserComponentBase'\nimport ComponentsSelectorBar from '../components/droy/ComponentsSelectorBar'\nimport NavBar from '../components/droy/NavBar'\nimport Loading from '../components/droy/Loading'\nimport '../styles/builder.css'\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\n\nclass Builder extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n  }\n\n  // a little function to help us with reordering the result\n  reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n  };\n\n  onDragEnd(result) {\n    if (!result.destination) {\n      return\n    }\n    const items = reorder(\n      this.state.items,\n      result.source.index,\n      result.destination.index\n    )\n    /* this.setState({\n      items\n    }) */\n  }\n\n  /* Updates data context with the actual project information */\n  componentDidMount = async () => {\n    const { match, getProjectInfo } = this.props\n    await getProjectInfo(match.params.projectId)\n    this.setState({ isLoading: false })\n  }\n\n  /* Loops over project info in data context to print user components */\n  /* If not components found, prints a pretty message */\n  showUserComponents = () => {\n    const { userLayoutObj, dataError } = this.props\n    if (!userLayoutObj.length) return (\n      <div className='empty-component-base'>\n        <img className='image-emptyBuilder' src='/img/empty-icon.png' alt='empty-icon' />\n        <p className='text-noComponents'>Start picking one component from the left!</p>\n      </div>)\n    if (dataError) return <div>{dataError}</div>\n    return userLayoutObj.map((c) => {\n      return <UserComponentBase componentStyle={c.componentStyle} componentOptions={c.componentOptions} code={c.code} key={c.code} />\n    })\n  }\n\n  render() {\n    const { mode } = this.props\n    const { isLoading } = this.state\n    return (\n      <div>\n        <NavBar withOptions />\n        <div className=\"main-builder\">\n          {isLoading && <div className='loading-container'><Loading /></div>}\n\n          <DragDropContext onDragEnd={this.onDragEnd}>\n            {!isLoading && mode === \"edit\" && <ComponentsSelectorBar />}\n            {!isLoading && <div className=\"components-builder\">{this.showUserComponents()}</div>}\n          </DragDropContext>\n\n\n\n          <Droppable droppableId=\"droppable\">\n            {(provided, snapshot) => (\n              <div\n                {...provided.droppableProps}\n                ref={provided.innerRef}\n                style={getListStyle(snapshot.isDraggingOver)}\n              >\n                {this.state.items.map((item, index) => (\n                  <Draggable key={item.id} draggableId={item.id} index={index}>\n                    {(provided, snapshot) => (\n                      <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        style={getItemStyle(\n                          snapshot.isDragging,\n                          provided.draggableProps.style\n                        )}\n                      >\n                        {item.content}\n                      </div>\n                    )}\n                  </Draggable>\n                ))}\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n\n\n\n\n\n\n\n\n\n        </div>\n      </div>\n    )\n  }\n}\n\nBuilder.propTypes = {\n  userLayoutObj: PropTypes.array,\n  saveInfoToContext: PropTypes.func\n}\n\nexport default withData(Builder)\n"]},"metadata":{},"sourceType":"module"}